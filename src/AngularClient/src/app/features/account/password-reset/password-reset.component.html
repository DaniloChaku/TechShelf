<main class="container mx-auto">
  <mat-card
    class="max-w-xl mx-auto mt-32 p-10"
    style="background-color: rgb(246, 246, 246)">
    <div class="text-center mb-7">
      <h1 class="text-3xl font-semibold text-primary">
        Set New Password
      </h1>
    </div>

    @if (successMessage()) {
    <div
      class="mb-4 p-4 bg-green-100 text-green-700 rounded">
      {{ successMessage() }}
      <p class="mt-2">Redirecting to login page...</p>
    </div>
    } @if (errorMessage()) {
    <div class="mb-4 p-4 bg-red-100 text-red-700 rounded">
      {{ errorMessage() }}
    </div>
    } @if (!successMessage()) {
    <form
      [formGroup]="resetPasswordForm"
      (submit)="onSubmit()">
      <mat-form-field
        appearance="outline"
        class="w-full mb-3">
        <mat-label>New Password</mat-label>
        <input
          (input)="onPasswordChange()"
          formControlName="password"
          type="password"
          placeholder="Enter new password"
          matInput />
        @if (passwordError) {
        <mat-error>{{ passwordError }}</mat-error>
        }
      </mat-form-field>

      <mat-form-field
        appearance="outline"
        class="w-full mb-5">
        <mat-label>Confirm Password</mat-label>
        <input
          (input)="onPasswordChange()"
          formControlName="confirmPassword"
          type="password"
          placeholder="Confirm new password"
          matInput />
        @if (confirmPasswordError) {
        <mat-error>{{ confirmPasswordError }}</mat-error>
        }
      </mat-form-field>

      <button
        mat-flat-button
        color="primary"
        [disabled]="
          !resetPasswordForm.valid || isSubmitting()
        "
        type="submit"
        class="w-full py-2 mb-2">
        Reset Password
      </button>
    </form>
    }
  </mat-card>
</main>
